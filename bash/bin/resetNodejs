#!/bin/bash
echo "**********"
echo "Removing /usr/lib/modules"
sudo rm -rf /usr/lib/node_modules

os_packages=(
  node-gyp
  nodejs
  nodejs-nopt
  npm
  semver
  yarn
)

node_packages=(
  @angular/cli
  @nestjs/cli
  neovim
  pm2
  ts-node
)

if programExists apt-get; then
  echo "**********"
  echo "Ubuntu node install"
  sudo apt remove     -y "${os_packages[@]}"
  sudo apt autoremove -y "${os_packages[@]}"
  sudo apt install    -y "${os_packages[@]}"

else
  echo "**********"
  echo "Arch Linux node install"
  sudo pacman -R  --noconfirm "${os_packages[@]}"
  sudo pacman -Sy --noconfirm "${os_packages[@]}"
fi

echo "**********"
echo "npm installing ${node_packages[@]}"
sudo npm install -g "${node_packages[@]}"
